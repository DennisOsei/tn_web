{% extends 'asso_tn/base_mobilitain.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block app_content %}
<div class="container">
    <div class="row">
	<div class="col-lg-12">
		<div id="mandatory-to-fill">
			<h1>Connexion</h1>

			<form method="post">
			{% csrf_token %}
			<div class="d-flex">
				{{ form.email|as_crispy_field }}
				{% for error in form.email.error_messages %}
					<p style="color: red">{{ error }}</p>
				{% endfor %}
			</div>

			<div class="d-flex flex-column">
				{{ form.captcha|as_crispy_field }}
				{% for error in form.captcha.errors %}
					<p style="color: red">{{ error }}</p>
				{% endfor %}
			</div>
			<button type="submit" class="btn donation-button">Connexion par email</button>
			<p class="text-secondary my-2">C'est tout ce qu'il faut !
				Vous recevrez un mél pour valider votre connexion.
				Si vous n'aviez pas déjà de compte, votre première connexion
				en créerait un.
			</p>
		</div> <!-- mandatory-to-fill -->

		<details id="optional-to-fill" class="my-3">
			<summary>Connexion par mot de passe</summary>

			<p>
				{{ form.password1|as_crispy_field }}
			</p>

			<button id="pass-connexion" type="submit" class="btn donation-button">Connexion avec mot de passe</button>
			{% for error in form.password1.error_messages %}
				<p style="color: red">{{ error }}</p>
			{% endfor %}
			<p class="text-secondary my-2">
				Sans mot de passe, vous recevrait un mél avec un
				lien pour valider votre connexion.  Si vous avez
				oublié votre mot de passe, connectez sans, vous
				recevrez un mél pour vous connecter.
			</p>



			<p><hr></p>
			<p>
				{{ form.password2|as_crispy_field  }}
			</p>
			{% if pwd_error %}
				<p style="color: red">{{ pwd_error }}</p>
			{% endif%}

			{% for error in form.password2.errors %}
				<p style="color: red">
					{% if error == "The two password fields didn’t match." %}
						Les mots de passe ne sont pas identiques.
					{% else %}
						{{ error }}
					{% endif %}
				</p>
			{% endfor %}

			<p class="text-secondary">Si vous créez votre compte et vous fournissez un
				mot de passe, tapez-le une deuxième fois.</p>
			<button type="submit" class="btn btn-outline-secondary">Inscription</button>
			</form>
		</details> <!-- optional-to-fill -->
	</div>
    </div>
</div>

{% endblock %}
